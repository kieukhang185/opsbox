# check api initcontainer log
kubectl -n dev logs api-fb6cf6845-5sglk -c migrate --previous --timestamps
kubectl -n dev describe pod api-fb6cf6845-2lnfh | sed -n '1,200p'

# get all monitoring resource
k -n monitoring -get all

# port-forward for prometheus
kubectl -n monitoring port-forward svc/monitoring-kube-prometheus-prometheus 9090:9090

# port-forward for grafana
kubectl -n monitoring port-forward svc/monitoring-grafana 3000:80 &

# grafana
Login default: admin / prom-operator
kubectl --namespace monitoring get secrets monitoring-grafana -o jsonpath="{.data.admin-password}" | base64 -d ; echo

# check grafana dashboard
kubectl logs -n monitoring deploy/monitoring-grafana -c grafana-sc-dashboard

# RabbitMQ Management UI
kubectl -n dev port-forward svc/rabbitmq 15672:15672

# Redis
kubectl -n dev get secret redis -o jsonpath='{.data.redis-password}' | base64 -d

# forward api that deploy by argo rollout
k -n dev port-forward svc/opsbox-api 8081:8081

# opsbox cli
export PATH=$PATH://home/ubuntu/.local/bin

# install sops
curl -LO https://github.com/getsops/sops/releases/download/v3.8.1/sops_3.8.1_amd64.deb
sudo dpkg -i sops_3.8.1_amd64.deb

# install cosign
curl -O -L "https://github.com/sigstore/cosign/releases/latest/download/cosign-linux-amd64"
sudo mv cosign-linux-amd64 /usr/local/bin/cosign
sudo chmod +x /usr/local/bin/cosign

# get argocd password
kubectl -n

# deploy nginx ingress
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
